import React, { useEffect, useState } from 'react';
import { LoadingOverlay } from '@mantine/core';
import DashboardArtworks from './DashboardArtworks';
import DashboardNovel from './DashboardNovel';
import './Dashboard.scss'

const Dashboard = () => {

    const [numberOfBooks, setNumberOfBooks] = useState(0)
    const [numberOfArtworks, setNumberOfArtworks] = useState(0)
    const [loaderVisible, setLoaderVisible] = useState(false);

    useEffect(() => {
        setLoaderVisible(true)

        fetch('https://radiant-spire-58573.herokuapp.com/api/novels')
            .then(res => res.json())
            .then(data => {
                setNumberOfBooks(data.length)
                setLoaderVisible(false)
            });

        fetch('https://radiant-spire-58573.herokuapp.com/api/artworks')
            .then(res => res.json())
            .then(data => {
                setNumberOfArtworks(data.length);
                setLoaderVisible(false)
            });

    }, [])


    return (
        <div className=' min-vh-100 w-100'>
            <LoadingOverlay visible={loaderVisible} loaderProps={{ variant: 'bars' }} />
            <section className="container dashboard-container">
                <div className="gap-3 row">
                    <div className="col dashboard-card">
                        <div className='w-100 center'>
                            <svg className='admin-dashboard-icon' width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.4222 16.868H20.1244C20.2744 16.868 20.3944 16.748 20.3944 16.598L20.3942 5.27C20.3942 5.12 20.2742 5 20.1242 5H15.8162C14.2742 5.02397 12.5192 6.07102 12.1531 6.29898V18.407C13.1161 17.762 14.4181 17.294 15.1471 17.063C15.5611 16.9371 15.9871 16.868 16.4221 16.868L16.4222 16.868ZM13.8031 7.40617H19.3409C19.4249 7.40617 19.4938 7.47514 19.4938 7.55912C19.4938 7.64309 19.4249 7.71206 19.3409 7.71206L13.8031 7.7122C13.7191 7.7122 13.6501 7.64322 13.6501 7.55925C13.6501 7.47514 13.7191 7.40617 13.8031 7.40617ZM13.1041 8.96308H19.5001C19.5841 8.96308 19.653 9.03206 19.653 9.11603C19.653 9.2 19.5841 9.26898 19.5001 9.26898L13.1041 9.26911C13.0201 9.26911 12.9511 9.20014 12.9511 9.11616C12.9511 9.03219 13.0201 8.96309 13.1041 8.96309V8.96308ZM13.1041 10.5201H19.5001C19.5841 10.5201 19.653 10.5891 19.653 10.6731C19.653 10.7601 19.5841 10.8291 19.5001 10.8291H13.1041C13.0201 10.8291 12.9511 10.7601 12.9511 10.6731C12.9511 10.5891 13.0201 10.5201 13.1041 10.5201ZM13.1041 12.0772H19.5001C19.5841 12.0772 19.653 12.1462 19.653 12.2332C19.653 12.3172 19.5841 12.3862 19.5001 12.3862H13.1041C13.0201 12.3862 12.9511 12.3172 12.9511 12.2332C12.9511 12.1462 13.0201 12.0772 13.1041 12.0772ZM13.1041 13.6372H19.5001C19.5841 13.6372 19.653 13.7062 19.653 13.7901C19.653 13.8741 19.5841 13.9431 19.5001 13.9431H13.1041C13.0201 13.9431 12.9511 13.8741 12.9511 13.7901C12.9511 13.7062 13.0201 13.6372 13.1041 13.6372ZM12.9511 15.3472C12.9511 15.2632 13.0201 15.1942 13.1041 15.1942H19.5001C19.5841 15.1942 19.653 15.2632 19.653 15.3472C19.653 15.4312 19.5841 15.5001 19.5001 15.5001H13.1041C13.0201 15.4972 12.9511 15.4281 12.9511 15.3472Z" fill="#4f4f4f" />
                                <path d="M20.6969 6.68V16.6009C20.6969 16.9189 20.439 17.177 20.124 17.177H16.4218C16.0197 17.177 15.6239 17.2369 15.2397 17.3599C14.4658 17.6059 13.0318 18.122 12.0987 18.8239C12.0837 18.8359 12.0658 18.8449 12.0417 18.8509C12.0296 18.8539 12.0146 18.8569 12.0027 18.8569C11.9848 18.8569 11.9667 18.854 11.9487 18.848C11.9398 18.845 11.9308 18.839 11.9248 18.8359C11.9187 18.833 11.9158 18.8299 11.9127 18.8269C11.9098 18.824 11.9037 18.8209 11.9006 18.818C10.9617 18.119 9.53668 17.6059 8.76563 17.36C8.38461 17.2371 7.98563 17.1771 7.58356 17.1771L3.87864 17.177C3.56364 17.177 3.30569 16.919 3.30569 16.6009V6.68001H2.39966V18.5178L7.44583 18.4399C8.42685 18.4399 9.36878 18.6259 10.2479 18.9978C10.8329 19.2468 11.3489 19.5078 11.7779 19.7808C12.0419 19.9518 12.3658 19.9518 12.63 19.7808C13.056 19.5078 13.587 19.2378 14.1629 18.9978C15.0359 18.6258 15.9809 18.4399 16.9619 18.4399H21.5997V6.67989L20.6969 6.68Z" fill="#4f4f4f" />
                                <path d="M3.87912 16.868H7.58129C8.01336 16.868 8.44526 16.937 8.85631 17.0659C9.58235 17.2939 10.8903 17.7649 11.8503 18.4099V6.305C11.4842 6.07397 9.72926 5.02707 8.18719 5.00293H3.87919C3.72919 5.00293 3.60919 5.12293 3.60919 5.27293V16.6009C3.60919 16.748 3.73227 16.868 3.87919 16.868L3.87912 16.868ZM4.66221 7.40617H10.2C10.284 7.40617 10.353 7.47514 10.353 7.55912C10.353 7.64309 10.284 7.71206 10.2 7.71206L4.66221 7.7122C4.57824 7.7122 4.50926 7.64322 4.50926 7.55925C4.51221 7.47514 4.5781 7.40617 4.66221 7.40617ZM4.50618 8.96309H10.9022C10.9862 8.96309 11.0551 9.03206 11.0551 9.11603C11.0551 9.2 10.9862 9.26898 10.9022 9.26898L4.50618 9.26911C4.42221 9.26911 4.35324 9.20014 4.35324 9.11616C4.3531 9.03219 4.42221 8.96309 4.50618 8.96309V8.96309ZM4.50618 10.5201H10.9022C10.9862 10.5201 11.0551 10.5891 11.0551 10.6731C11.0551 10.7601 10.9862 10.8291 10.9022 10.8291H4.50618C4.42221 10.8291 4.35324 10.7601 4.35324 10.6731C4.3531 10.5891 4.42221 10.5201 4.50618 10.5201ZM4.50618 12.0772H10.9022C10.9862 12.0772 11.0551 12.1462 11.0551 12.2332C11.0551 12.3172 10.9862 12.3862 10.9022 12.3862H4.50618C4.42221 12.3862 4.35324 12.3172 4.35324 12.2332C4.3531 12.1462 4.42221 12.0772 4.50618 12.0772ZM4.50618 13.6372H10.9022C10.9862 13.6372 11.0551 13.7062 11.0551 13.7901C11.0551 13.8741 10.9862 13.9431 10.9022 13.9431H4.50618C4.42221 13.9431 4.35324 13.8741 4.35324 13.7901C4.3531 13.7062 4.42221 13.6372 4.50618 13.6372ZM4.50618 15.1941H10.9022C10.9862 15.1941 11.0551 15.2631 11.0551 15.347C11.0551 15.431 10.9862 15.5 10.9022 15.5L4.50618 15.5001C4.42221 15.5001 4.35324 15.4312 4.35324 15.3472C4.3531 15.2631 4.42221 15.1941 4.50618 15.1941Z" fill="#4f4f4f" />
                            </svg>
                        </div>
                        <h3 className='dashboard-items-number'>{numberOfBooks}</h3>
                        <p className='dashboard-card-title'>Number of Books</p>
                    </div>

                    <div className="col dashboard-card">
                        <div className='w-100 center'>
                            <svg className='admin-dashboard-icon' width="24" height="24" viewBox="0 0 24 24" fill="#4F4F4F" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 12C14.525 12 16.5714 9.98555 16.5714 7.5C16.5714 5.01445 14.525 3 12 3C9.475 3 7.42857 5.01445 7.42857 7.5C7.42857 9.98555 9.475 12 12 12ZM15.4214 13.1461L13.7143 19.875L12.5714 15.0938L13.7143 13.125H10.2857L11.4286 15.0938L10.2857 19.875L8.57857 13.1461C6.03214 13.2656 4 15.3152 4 17.85V19.3125C4 20.2441 4.76786 21 5.71429 21H18.2857C19.2321 21 20 20.2441 20 19.3125V17.85C20 15.3152 17.9679 13.2656 15.4214 13.1461Z" fill="#4F4F4F" />
                            </svg>
                        </div>
                        <h3 className='dashboard-items-number'>345</h3>
                        <p className='dashboard-card-title'>Number of Users</p>
                    </div>

                    <div className="col dashboard-card">
                        <div className='w-100 center'>
                            <svg className='admin-dashboard-icon' width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <h3 className='dashboard-items-number'>654</h3>
                        <p className='dashboard-card-title'>Number of Viewers</p>
                    </div>

                    <div className="col dashboard-card">
                        <div className='w-100 center'>
                            <svg className='admin-dashboard-icon' width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20.7809 6.31579H3.22185C2.76876 6.31579 2.39978 6.6727 2.39978 7.11081V17.0886C2.39978 17.5266 2.76876 17.8836 3.22185 17.8836H20.7809C21.2339 17.8836 21.5999 17.5266 21.5999 17.0886V7.11081C21.5999 6.67274 21.2339 6.31579 20.7809 6.31579ZM4.20893 14.8389V9.36104C4.91392 9.29502 5.47497 8.75206 5.54687 8.07104H18.4558C18.5248 8.75206 19.0887 9.29501 19.7908 9.36104V14.8389C19.0887 14.9049 18.5248 15.4479 18.4558 16.1289H5.54687C5.47481 15.4479 4.91378 14.9049 4.2088 14.8389H4.20893Z" fill="#4f4f4f" />
                                <path d="M12 15.2438C13.734 15.2438 15.144 13.8338 15.144 12.0998C15.144 10.3659 13.734 8.95586 12 8.95586C10.2661 8.95586 8.85608 10.3659 8.85608 12.0998C8.85608 13.8338 10.2661 15.2438 12 15.2438ZM11.943 12.2108C11.484 12.0308 11.199 11.8238 11.199 11.4338C11.199 11.0588 11.4661 10.7767 11.88 10.7078V10.2548H12.159V10.6898C12.429 10.6988 12.612 10.7708 12.744 10.8488L12.63 11.1458C12.5371 11.0919 12.3511 10.9929 12.063 10.9929C11.718 10.9929 11.5859 11.2 11.5859 11.38C11.5859 11.611 11.7539 11.7279 12.1439 11.89C12.6088 12.0789 12.8399 12.3129 12.8399 12.7149C12.8399 13.0689 12.5939 13.402 12.132 13.4799V13.9449H11.847V13.492C11.5859 13.489 11.3159 13.408 11.1599 13.294L11.2679 12.994C11.4299 13.102 11.6639 13.1861 11.9158 13.1861C12.2337 13.1861 12.4497 13.0031 12.4497 12.745C12.45 12.4988 12.276 12.3458 11.943 12.2108L11.943 12.2108Z" fill="#4f4f4f" />
                            </svg>
                        </div>
                        <h3 className='dashboard-items-number'>87686 BDT</h3>
                        <p className='dashboard-card-title'>Total Donation</p>
                    </div>

                    <div className="col dashboard-card">
                        <div className='w-100 center'>
                            <svg className='admin-dashboard-icon mb-0' width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.48219 16.4284C7.55191 16.4284 7.62216 16.4017 7.67532 16.3479L10.1836 13.8397L11.2556 14.9116C11.363 15.0186 11.5363 15.0186 11.6429 14.9116L14.7325 11.8218L16.2494 13.3381C16.3564 13.4453 16.5295 13.4453 16.6365 13.3381C16.7432 13.2311 16.7432 13.0582 16.6365 12.9513L14.9258 11.2413C14.8192 11.1343 14.6459 11.1343 14.5392 11.2413L11.4496 14.3315L10.3773 13.2592C10.2701 13.1525 10.097 13.1525 9.99013 13.2592L7.28815 15.9615C7.18113 16.0685 7.18113 16.2411 7.28815 16.3481C7.34219 16.4018 7.41191 16.4285 7.48216 16.4285L7.48219 16.4284Z" fill="#4F4F4F" />
                                <path d="M8.81607 12.9398C9.55146 12.9398 10.1497 12.3414 10.1497 11.6058C10.1497 10.8704 9.55133 10.2718 8.81607 10.2718C8.08082 10.2718 7.48242 10.8701 7.48242 11.6058C7.48242 12.3412 8.08064 12.9398 8.81607 12.9398ZM8.81607 10.8191C9.24993 10.8191 9.60291 11.1719 9.60291 11.6058C9.60291 12.0397 9.24976 12.3925 8.81607 12.3925C8.38222 12.3925 8.02941 12.0397 8.02941 11.6058C8.02941 11.1721 8.38221 10.8191 8.81607 10.8191Z" fill="#4F4F4F" />
                                <path d="M19.6781 7.11153H4.24612C4.11016 7.11153 4 7.2217 4 7.35766V19.3421C4 19.4782 4.11017 19.5886 4.24612 19.5886H19.6781C19.8143 19.5886 19.9246 19.4784 19.9246 19.3421V7.35766C19.9248 7.22204 19.8143 7.11153 19.6781 7.11153ZM19.2279 7.60431L18.7696 8.06259C18.7574 8.06102 18.7466 8.05561 18.7344 8.05561H5.31221L4.86112 7.60434L19.2279 7.60431ZM18.488 8.54818V18.1524H5.5236V8.54818H18.488ZM4.4928 7.93166L5.03158 8.47044V18.2706L4.4928 18.8088V7.93166ZM4.90208 19.0968L5.35407 18.6448H18.7343C18.7348 18.6448 18.7348 18.6443 18.7354 18.6443L19.1874 19.0968L4.90208 19.0968ZM19.4323 18.6448L18.9805 18.1937V8.548L19.4323 8.09672V18.6448Z" fill="#4F4F4F" />
                                <path d="M11.0421 6.81346L12.2609 5.59453L13.4798 6.81346C13.576 6.90967 13.7317 6.90967 13.8284 6.81346C13.9246 6.71724 13.9246 6.56123 13.8284 6.46519L12.4353 5.0721C12.3391 4.97605 12.1835 4.97588 12.0871 5.0721L10.694 6.46519C10.5979 6.5614 10.5983 6.71741 10.694 6.81346C10.79 6.90967 10.9457 6.90967 11.0421 6.81346H11.0421Z" fill="#4F4F4F" />
                            </svg>
                        </div>
                        <h3 className='dashboard-items-number'>{numberOfArtworks}</h3>
                        <p className='dashboard-card-title'>Number of Artworks</p>
                    </div>
                </div>
            </section>

            <section className='mb-5'>
                <h3 className='dashboard-section-title'>Recently Added Novels</h3>
                <DashboardNovel key='DashboardNovel' />
            </section>

            <section className='mb-5'>
                <h3 className='dashboard-section-title'>Recently Added Artworks</h3>
                <DashboardArtworks key={'DashboardArtworks'} />
            </section>

        </div>
    );
};

export default Dashboard;